name: ChainSaw Test

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  chainsaw-e2e:
    strategy:
      fail-fast: false
      matrix:
        k8s-version: [v1.33.1]
        n4k-chart-version: [3.4.0-rc1]
        kyverno_policies_branch: [main]

    uses: ./.github/workflows/reusable-chainsaw.yaml
    with:
      k8s_version: ${{ matrix.k8s-version }}
      n4k_chart_version: ${{ matrix.n4k-chart-version }} 
      kyverno_policies_branch: ${{ matrix.kyverno_policies_branch }}

